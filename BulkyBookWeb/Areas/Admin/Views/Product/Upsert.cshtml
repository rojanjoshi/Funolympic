@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@model BulkyBook.Models.ViewModels.ProductVM
<form method="post" asp-action="Upsert" enctype="multipart/form-data">
	<input asp-for="Product.Id" hidden />
	<input asp-for="Product.ImageUrl" hidden />
	
	<div class="row">
			<div class="border p-3 mt-4 row">
		<div class="col-12 pb-2">
			@if(Model.Product.Id != 0)
			{
					<h3 class="text-dark">Update Product</h3>

				}else
				{
					<h3 class="text-dark">Create Product</h3>
				}
				
			<hr />
		</div>
		
		<div class="mb-3">
			<label asp-for="Product.Name"></label>
			<input asp-for="Product.Name" class="form-control" type="text" required style="background:#e6e6e6;"/>
			<span asp-validation-for="Product.Name" class="text-danger"></span>
		</div>
		<div class="mb-3">
			<label asp-for="Product.Price"></label>
			<input asp-for="Product.Price" class="form-control" type="number" required style="background:#e6e6e6;"/>
			<span asp-validation-for="Product.Price" class="text-danger"></span>
		</div>

			<div class="mb-3">
			<label asp-for="Product.ImageUrl"></label>
			<input type="file" id="uploadBox" name="file" class="form-control" />
		</div>


				<div class="mb-3">
			<label asp-for="Product.CategoryId"></label>
			<select asp-for="Product.CategoryId" asp-items="@Model.CategoryList" class="form-select">
				<option disabled selected>--Select Category--</option>
			</select>
			<span asp-validation-for="Product.CategoryId" class="text-danger"></span>
		</div>
	
		<div class="col-12">
			@if (Model.Product.Id != 0)
			{
				<button type="submit" class="btn btn-info" style="width:190px"><i class="bi bi-save"></i> &nbsp;Save</button>
			}
			else
			{
				<button type="submit"  class="btn btn-info" style="width:190px"><i class="bi bi-plus-circle"></i> &nbsp;Create</button>
			}
			<a asp-controller="Product" asp-action="Index" class="btn btn-warning" style="width:190px"><i class="bi bi-arrow-left-circle"></i> &nbsp;
				Back to List
			</a>
		</div>
	</div>
	</div>
</form>

@section Scripts{
	@{
	<partial name="_ValidationScriptsPartial" />
	}
}
<script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
        $("#Employee_DesignationId").change(function(){
            var designationid = $("#Employee_DesignationId").val();
            getempsalary(designationid);
        });
    });

    function getempsalary(designationid){
        $.ajax({
            async:true,
            type:'Get',
            dataType:'JSON',
            contentType:'application/json; charset=utf-8',
            data:{designationid:designationid},
            url:'/admin/employee/getempsalary',
            success:function(data){
                $("#txtsalary").val(parseInt(data));
            },
            error:function(){
                alert("There is some problem to get the employee salary");
            }
        });
    }
</script>